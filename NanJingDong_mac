#!/bin/sh
# 
# Run AnyLogic Experiment
# 
DIR_BACKUP_XJAL=$(pwd)
SCRIPT_DIR_XJAL=$(dirname "$0")
cd "$SCRIPT_DIR_XJAL"
find chromium/chromium-mac* -path "*/Contents/MacOS/*" -print0 | xargs -0 chmod +x

java -Xdock:name="AnyLogic Model" -cp model.jar:lib/MarkupDescriptors.jar:lib/PedestrianLibrary.jar:lib/ProcessModelingLibrary.jar:lib/Core.jar:lib/LevelSystem.jar:lib/NavigationMesh.jar:lib/jts-core-1.16.0.jar:lib/com.anylogic.engine.jar:lib/com.anylogic.engine.datautil.jar:lib/com.anylogic.engine.editorapi.jar:lib/com.anylogic.engine.generalization.jar:lib/com.anylogic.engine.sa.jar:lib/sa/com.anylogic.engine.sa.web.jar:lib/sa/executor-basic-8.3.jar:lib/sa/ioutil-8.3.jar:lib/sa/jackson/jackson-annotations-2.14.3.jar:lib/sa/jackson/jackson-core-2.14.3.jar:lib/sa/jackson/jackson-databind-2.14.3.jar:lib/sa/spark/javax.servlet-api-3.1.0.jar:lib/sa/spark/jetty-client-9.4.51.v20230217.jar:lib/sa/spark/jetty-http-9.4.51.v20230217.jar:lib/sa/spark/jetty-io-9.4.51.v20230217.jar:lib/sa/spark/jetty-security-9.4.51.v20230217.jar:lib/sa/spark/jetty-server-9.4.51.v20230217.jar:lib/sa/spark/jetty-servlet-9.4.51.v20230217.jar:lib/sa/spark/jetty-servlets-9.4.51.v20230217.jar:lib/sa/spark/jetty-util-9.4.51.v20230217.jar:lib/sa/spark/jetty-util-ajax-9.4.51.v20230217.jar:lib/sa/spark/jetty-webapp-9.4.51.v20230217.jar:lib/sa/spark/jetty-xml-9.4.51.v20230217.jar:lib/sa/spark/slf4j-api-1.7.25.jar:lib/sa/spark/spark-core-2.9.4-AL.jar:lib/sa/spark/websocket-api-9.4.51.v20230217.jar:lib/sa/spark/websocket-client-9.4.51.v20230217.jar:lib/sa/spark/websocket-common-9.4.51.v20230217.jar:lib/sa/spark/websocket-server-9.4.51.v20230217.jar:lib/sa/spark/websocket-servlet-9.4.51.v20230217.jar:lib/sa/util-8.3.jar:lib/querydsl-core-5.0.0.jar:lib/querydsl-sql-5.0.0.jar:lib/querydsl-sql-codegen-5.0.0.jar:lib/commons-lang3-3.9.jar:lib/commons-codec-1.16.0.jar:lib/commons-collections4-4.4.jar:lib/commons-math3-3.6.1.jar:lib/commons-compress-1.25.0.jar:lib/commons-io-2.15.0.jar:lib/log4j-api-2.21.1.jar:lib/log4j-to-slf4j-2.21.1.jar:lib/poi-5.2.5.jar:lib/poi-examples-5.2.5.jar:lib/poi-excelant-5.2.5.jar:lib/poi-ooxml-5.2.5.jar:lib/poi-ooxml-lite-5.2.5.jar:lib/poi-scratchpad-5.2.5.jar:lib/xmlbeans-5.2.0.jar:lib/al-ecj-4.27.jar:lib/al-profiler-converter-3.0-ea-53b8a8ad.jar:lib/al-sqlsheet-7.2-2c2d836_poi_5.2.5.jar:lib/annotations-13.0.jar:lib/bcprov-jdk15on-1.70.jar:lib/classgraph-4.8.108.jar:lib/codegen-utils-5.0.0.jar:lib/crypt-codec-opener-1.0.0.jar:lib/curvesapi-1.08.jar:lib/hsqldb-2.7.1.jar:lib/jackcess-3.0.1.jar:lib/jackcess-encrypt-3.0.0.jar:lib/jakarta.activation-1.2.2.jar:lib/jakarta.xml.bind-api-2.3.3.jar:lib/javax.annotation-api-1.3.2.jar:lib/javax.inject-1.jar:lib/jaxb-api-2.3.0.jar:lib/jaxb-impl-2.3.8.jar:lib/jcl-over-slf4j-1.7.25.jar:lib/joml-1.10.6.jar:lib/jsqlparser-4.0.jar:lib/jtds-1.3.1.jar:lib/jul-to-slf4j-1.7.25.jar:lib/kotlin-stdlib-1.8.20.jar:lib/kotlin-stdlib-common-1.8.20.jar:lib/kotlin-stdlib-jdk7-1.8.20.jar:lib/kotlin-stdlib-jdk8-1.8.20.jar:lib/log4j-over-slf4j-1.7.25.jar:lib/mariadb-java-client-3.2.0.jar:lib/mssql-jdbc-11.2.3.jre11.jar:lib/mysema-commons-lang-0.2.4.jar:lib/ojdbc11-23.2.0.0.jar:lib/postgresql-42.6.0.jar:lib/querydsl-codegen-5.0.0.jar:lib/slf4j-api-1.7.25.jar:lib/SparseBitSet-1.3.jar:lib/ucanaccess-5.0.1-AL-19262.jar -Xmx16384m nanjingdong.Simulation $*

EXIT_CODE=$?
cd "$DIR_BACKUP_XJAL"
